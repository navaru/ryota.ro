<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1" />

		${head}

		<link rel="icon" type="image/png" href="/favicon.png" />
		<link rel="manifest" href="/manifest.json" />

		<link
			href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,400;0,700;1,400;1,700&family=Noto+Serif:ital,wght@0,400;0,700;1,400;1,700&family=DM+Serif+Display&display=swap"
			rel="stylesheet"
		/>

		<script type="text/javascript">
			var STATE = ${state};

			window.addEventListener("DOMContentLoaded", function (event) {
				document.body.classList.remove("initializing");
			});
		</script>

		<!-- Google Tag Manager -->
		<script>
			(function (w, d, s, l, i) {
				w[l] = w[l] || [];
				w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
				var f = d.getElementsByTagName(s)[0],
					j = d.createElement(s),
					dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore(j, f);
			})(window, document, 'script', 'dataLayer', 'GTM-KQH8SRK');
		</script>
		<!-- End Google Tag Manager -->

		<style>
			.initializing::before {
				content: '';
				position: fixed;
				top: 0;
				right: 0;
				bottom: 0;
				left: 0;

				background-color: #f0e8de;
			}
			.initializing::after {
				content: '';
				position: fixed;
				top: calc(50% - 1.6rem);
				left: calc(50% - 1.6rem);
				width: 3.2rem;
				height: 3.2rem;
				background-color: #d8cec2;
				border-radius: 50%;
				opacity: 0;
				animation: spinner-grow 0.75s linear infinite;
			}
			.initializing > #canvas {
				opacity: 0;
			}
			#canvas {
				opacity: 1;
				transition: opacity 1s cubic-bezier(0.215, 0.61, 0.355, 1);
			}
			@keyframes spinner-grow {
				0% {
					transform: scale(0);
				}
				50% {
					opacity: 1;
				}
			}
		</style>

		${preload} ${styles}
	</head>
	<body class="initializing">
		<div id="canvas">${content}</div>

		${scripts}
	</body>
</html>
